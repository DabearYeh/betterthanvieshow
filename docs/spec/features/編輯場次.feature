Feature: 編輯場次
  影城管理者可以在草稿狀態下編輯場次資訊
  販售中狀態的場次無法編輯

  Background:
    Given 管理者已登入系統

  Rule: 草稿狀態的場次可以編輯時間
    Example: 成功編輯場次的放映時間
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      And 場次「誅仙 - 2025/12/22 09:00」已存在
      When 管理者將該場次的放映時間改為「10:00」
      Then 場次資訊更新成功
      And 場次的放映時間為「10:00」

  Rule: 草稿狀態的場次可以更換電影
    Example: 成功更換場次的電影
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      And 場次「誅仙 - 2025/12/22 09:00」已存在
      When 管理者將該場次的電影改為「雲深不知夢」
      Then 場次資訊更新成功

  Rule: 草稿狀態的場次可以更換影廳
    Example: 成功更換場次的影廳
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      And 場次「誅仙 - 龍廳 - 2025/12/22 09:00」已存在
      When 管理者將該場次的影廳改為「鳳廳」
      Then 場次資訊更新成功

  Rule: 場次日期不可變更
    Example: 禁止將場次移動到其他日期
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      And 場次「誅仙 - 2025/12/22 09:00」已存在
      When 管理者嘗試將該場次移動到日期「2025-12-23」
      Then 操作失敗
      And 場次仍屬於日期「2025-12-22」

  Rule: 販售中狀態的場次無法編輯
    Example: 販售中狀態禁止編輯場次
      Given 日期「2025-12-22」的時刻表狀態為 OnSale
      And 場次「誅仙 - 2025/12/22 09:00」已存在
      When 管理者嘗試編輯該場次
      Then 操作失敗

  Rule: 編輯場次時需檢查時間衝突
    Example: 編輯後時間不衝突，允許更新
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      And 影廳「龍廳」已有場次「2025-12-22 09:00」
      When 管理者將該場次的放映時間改為「14:00」
      Then 場次資訊更新成功

    Example: 編輯後時間衝突，禁止更新
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      And 影廳「龍廳」已有場次「2025-12-22 09:00」和「2025-12-22 14:00」
      When 管理者將第一個場次的放映時間改為「14:00」
      Then 操作失敗
