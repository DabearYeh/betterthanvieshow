Feature: 複製時刻表
  為了快速排片，管理者可以將已販售的時刻表複製到另一個日期

  Background:
    Given 管理者已登入系統

  Rule: 只有販售中(OnSale)的時刻表可以被複製
    Example: 複製販售中的時刻表
      Given 日期「2025-12-22」的時刻表狀態為 OnSale
      And 日期「2025-12-23」的時刻表狀態為 Draft
      When 管理者選擇將「2025-12-22」的時刻表複製到「2025-12-23」
      Then 系統將「2025-12-22」的所有場次複製到「2025-12-23」
      And 「2025-12-23」的時刻表狀態仍為 Draft

    Example: 禁止複製草稿狀態的時刻表
      Given 日期「2025-12-22」的時刻表狀態為 Draft
      When 管理者嘗試複製「2025-12-22」的時刻表
      Then 操作失敗
      And 顯示錯誤訊息「只能複製已販售的時刻表」

  Rule: 只能複製到草稿(Draft)狀態的日期
    Example: 複製到草稿狀態日期（覆蓋模式）
      Given 日期「2025-12-22」的時刻表狀態為 OnSale
      And 日期「2025-12-23」的時刻表狀態為 Draft
      And 「2025-12-23」已存在部分場次
      When 管理者選擇將「2025-12-22」的時刻表複製到「2025-12-23」
      Then 系統先移除「2025-12-23」的所有舊場次
      And 系統將「2025-12-22」的所有場次複製到「2025-12-23」
      And 操作成功

    Example: 禁止複製到已販售的日期
      Given 日期「2025-12-22」的時刻表狀態為 OnSale
      And 日期「2025-12-23」的時刻表狀態為 OnSale
      When 管理者嘗試將「2025-12-22」的時刻表複製到「2025-12-23」
      Then 操作失敗
      And 顯示錯誤訊息「目標日期必須為草稿狀態」

  Rule: 自動略過檔期不符的場次
    Example: 部分複製成功
      Given 日期「2025-12-22」有電影 A 和電影 B 的場次
      And 電影 A 在「2025-12-25」仍在檔期內
      And 電影 B 在「2025-12-25」已下映
      When 管理者將「2025-12-22」的時刻表複製到「2025-12-25」
      Then 系統僅複製電影 A 的場次
      And 系統略過電影 B 的場次
      And 系統顯示提示訊息「部分場次因電影檔期已過期未複製」
