# 訂票_選擇座位時如何判斷座位是否已被訂走

訂票功能中,選擇座位時如何判斷座位是否已被訂走？

# 定義

Feature：訂票功能
Rule：只能選擇未被訂走的座位

# 多選項

| 選項 | 描述 |
|--------|-------------|
| A | 檢查該座位是否有已付款的 Ticket |
| B | 檢查該座位是否有任何狀態的 Ticket |
| C | 檢查該座位是否有未取消的 Order |
| Short | 其他（請簡短答案<=5 字）|

# 影響範圍

- 訂票功能的前置條件邏輯
- Ticket 與 Order 的狀態判斷邏輯
- 座位占用性查詢邏輯
- 測試案例設計

# 優先級

High
- 影響訂票的業務邏輯
- 影響座位衝突的判斷方式

---

# 釐清記錄

**使用者選擇: B**

**規格文件變更:**
- `spec/features/訂票.feature` - 更新規則說明:
  - Rule「只能選擇未被訂走的座位」：明確判斷邏輯為檢查該座位在該場次是否有任何狀態的 Ticket,只要有 Ticket 記錄就視為已被訂走

---

# 解決記錄

- **決議**：A  檢查「待付款」與「未使用」與「已使用」狀態
- **理由**：座位若有訂單建立,即使待付款/未使用/已使用都算占用,確保數據正確；僅「已過期」狀態,該座位可以重新訂購
- **更新規格檔案**：spec/features/訂票.feature
