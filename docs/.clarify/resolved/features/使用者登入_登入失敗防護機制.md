# 使用者登入_登入失敗防護機制

使用者登入 feature 規定信箱與密碼錯誤時無法登入，澄清的問題是登入失敗的試次限制。系統是否設置防止暴力破解的機制？

# 定義

Feature：使用者登入 feature 中「信箱與密碼必須相符」的登入條件

# 多選項

| 選項 | 描述 |
|--------|-------------|
| A | 不限制登入失敗次數 |
| B | 一定時間內（例 15 分鐘）失敗 N 次（例 5 次）後鎖定帳號 |
| C | 失敗 N 次後增加驗證步驟（例 CAPTCHA）|
| D | 失敗 N 次後要求郵件驗證 |
| Short | 登入失敗制策略 |

# 影響範圍

- 登入安全機制
- User 表是否要新增欄位 failed_attempts 與 locked_until
- 登入功能的實作難度

# 優先級

Low
- Low：安全性提升但不影響核心功能邏輯

---

# 澄清內容

- **決定**：B  15 分鐘內失敗 5 次後鎖定帳號 15 分鐘
- **更新位置**：spec/features/使用者登入.feature + spec/erm.dbml
- **實作說明**：
  - 新增使用者狀態「帳號被鎖定」
  - User 表新增欄位：failed_login_attempts (失敗次數)、Blocked_until (解鎖時間)
  - 機制：每次失敗次數加 1，達到 5 次後鎖定 15 分鐘，期間拒絕登入嘗試；時間過期自動解鎖