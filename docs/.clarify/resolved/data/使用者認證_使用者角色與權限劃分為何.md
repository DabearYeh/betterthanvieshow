# 釐清問題

使用者角色與權限劃分的具體範圍為何？（包括哪些角色、各角色可執行哪些操作）

# 定位

ERM：User 實體的角色屬性  
Feature：使用者登入、使用者註冊  
全系統基礎：所有其他功能的權限基礎

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 簡化模型：僅區分「一般用戶」與「管理員」，用戶編輯和刪除受限，管理員不受限 |
| B | 標準模型：「一般用戶」、「影廳管理員」、「系統管理員」三層角色，權限差異化 |
| C | 進階模型：「一般用戶」、「影廳管理員」、「財務管理員」、「系統管理員」四層角色 |
| D | 自訂模型：其他具體角色與權限劃分方案 |

# 影響範圍

- User 實體的 role 屬性設計
- API 層的授權檢查（Authorization）
- 各功能模組的訪問控制（Feature 級別）
  - 電影管理（建立、編輯、刪除）
  - 影廳管理（建立、編輯、刪除）
  - 場次管理（建立、編輯、刪除）
  - 座位配置管理
  - 訂單管理（查詢、取消）
  - 驗票管理

# 優先級

High ⭐⭐⭐（全系統基礎，影響所有其他功能）

---

**說明**：
- 使用者登入、登出、註冊涉及身份認證（Authentication）
- 後續功能的訪問控制涉及權限驗證（Authorization）
- 需確定系統支援多少種角色，每種角色的操作範圍

# 相關 Feature 檔案

- `使用者登入.feature` — 登入後的角色身份確認
- `使用者登出.feature` — 登出邏輯
- `使用者註冊.feature` — 註冊時的默認角色
- `建立電影.feature` — 誰可以建立
- `編輯電影.feature` — 誰可以編輯
- `刪除電影.feature` — 誰可以刪除
- `建立影廳.feature` — 誰可以建立
- `編輯影廳.feature` — 誰可以編輯
- `刪除影廳.feature` — 誰可以刪除
- `設定場次.feature` — 誰可以設定
- `設定座位配置.feature` — 誰可以設定
- `訂票.feature` — 誰可以訂票
- `查詢訂票記錄.feature` — 誰可以查詢（自己/他人的訂票記錄）
- `驗票.feature` — 誰可以驗票

---
# 解決記錄

- **回答**：A - 三角色標準模型
- **更新的規格檔**：
  - spec/erm.dbml - User 實體的 role 屬性與 Note
  - spec/features/使用者註冊.feature - 新增「註冊時預設角色為顧客」規則
- **變更內容**：
  - 明確定義三種角色的權限劃分：
    - Customer（顧客）：可訂票、查詢自己的訂票記錄、瀏覽電影/場次
    - Admin（管理者）：可管理電影、影廳、場次、座位配置，可查詢所有訂票記錄
    - TicketChecker（驗票人員）：僅可驗票、查看驗票記錄
  - 註冊時預設角色為 Customer，Admin 和 TicketChecker 由系統管理員手動設定
