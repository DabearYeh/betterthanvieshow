# 釐清問題

電影的上映狀態（coming / running / ended）應如何自動轉換或手動管理？轉換的觸發條件是什麼？

# 定位

ERM：Movie.release_status 屬性
Features：建立電影、瀏覽電影 → 正在上映 vs 即將上映的判斷邏輯

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 完全手動設定，管理者可自行選擇 coming / running / ended |
| B | 自動判斷：若有場次且最近場次日期 >= 今日則為 running，所有場次都在未來則為 coming，所有場次都在過去則為 ended |
| C | 混合方式：管理者可設定初始狀態，系統根據最近場次自動轉換 |
| Short | 其他邏輯 |

# 影響範圍

- Movie 實體的狀態生命週期
- 瀏覽電影功能的篩選邏輯
- 場次設定時的狀態更新
- 電影刪除時的狀態檢查

# 優先級

High

---

**說明**：Feature 中有判斷邏輯說明「電影有場次且至少有一個場次的 show_date >= 當前日期」，但尚未明確定義何時自動轉換狀態，以及是否允許手動修改。

---
# 解決記錄

- **回答**：動態計算，無 release_status 欄位
- **更新的規格檔**：無需修改（當前設計已符合需求）
- **變更內容**：
  - 決策：電影上映狀態動態計算，不儲存在資料庫中
  - 判斷邏輯（根據 release_date 和 end_date）：
    - **即將上映**：release_date > 今天
    - **正在上映**：release_date <= 今天 <= end_date
    - **已下映**：end_date < 今天
  - 無需 release_status 欄位，避免數據冗餘和不一致
  - 重映策略：建立新電影記錄（如「電影名 - 重映版」），而不修改原電影日期
  - 當前 erm.dbml 中 Movie 實體的 Note 已完整描述此邏輯，符合此決策
